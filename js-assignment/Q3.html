<!DOCTYPE html>
<html>

<head>
    <title>
        Q3 of JS assignment
    </title>
    <script type="text/javascript">
        var winOpens = new Array();

        function sleep(milliseconds) {
            var start = new Date().getTime();
            for (var i = 0; i < 1e7; i++) {
                if ((new Date().getTime() - start) > milliseconds) {
                    break;
                }
            }
        }

        function main() {
            for (var i = 0; i < 6; i++) {
                var win = window.open("https://unsplash.com/s/photos/mountains");
                winOpens.push(win);
            }
            var interval = 3000;
            winOpens.forEach(function(win, index) {
                setTimeout(function() {
                    win.close();
                }, index * interval);


            });
        }

        function stop() {
            console.log("terminating");
            window.close();
            //throw new Error();
            //break;
            return;
        }
    </script>
</head>

<body>
    <form>
        <input type=button value="Open Windows" onclick="main();"><br/><br/>
        <input type=button value="STOP" onclick="stop();">
    </form>
</body>

</html>